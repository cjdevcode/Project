
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="styles.css">
	<title> ... Celso Del Rio ecd610 ... </title>
</head>
	<body>

		<header class="jumbotron mb-0">
			<div class="container-fluid	">
				<div class="row row-header">
					<div class="col-12 col-sm-6">
						<h1>Ristorante con Fusion</h1>
						<p>We take inspiration from the World's best cuisines, and create a unique fusion experience. Our lipsmacking creations will tickle your culinary senses!</p>
					</div>
					<div class="col-12 col-sm">
					</div>
				</div>
			</div>
		</header>

		<div class="container">
			<div class="row">
				<div class="col-12">
					<h3>About Us</h3>
					<hr>
				</div>
			</div>

			<div class="row row-content">
				<div class="col-12 col-sm-6">
					<h2>Our History</h2>
					<p>Started in 2010, Ristorante con Fusion quickly established itself as a culinary icon par excellence in Hong Kong. With its unique brand of world fusion cuisine that can be found nowhere else, it enjoys patronage from the A-list clientele in Hong Kong.  Featuring four of the best three-star Michelin chefs in the world, you never know what will arrive on your plate the next time you visit us.</p>
					<p>The restaurant traces its humble beginnings to <em>The Frying Pan</em>, a successful chain started by our CEO, Mr. Peter Pan, that featured for the first time the world's best cuisines in a pan.</p>
				</div>
				<div class="col-sm">
				</div>
			</div>


			<hr>
			<div class="row my-5">
				<div class="col-12">
					<h2>Corporate Leadership</h2>
					<h3>Peter Pan <small>Chief Epicurious Officer</small></h3>
					<p class="d-none d-sm-block">Our CEO, Peter, credits his hardworking East Asian immigrant parents who undertook the arduous journey to the shores of America with the intention of giving their children the best future. His mother's wizardy in the kitchen whipping up the tastiest dishes with whatever is available inexpensively at the supermarket, was his first inspiration to create the fusion cuisines for which <em>The Frying Pan</em> became well known. He brings his zeal for fusion cuisines to this restaurant, pioneering cross-cultural culinary connections.</p>
					<h3>Dhanasekaran Witherspoon <small>Chief Food Officer</small></h3>
					<p class="d-none d-sm-block">Our CFO, Danny, as he is affectionately referred to by his colleagues, comes from a long established family tradition in farming and produce. His experiences growing up on a farm in the Australian outback gave him great appreciation for varieties of food sources. As he puts it in his own words, <em>Everything that runs, wins, and everything that stays, pays!</em></p>
					<h3>Agumbe Tang <small>Chief Taste Officer</small></h3>
					<p class="d-none d-sm-block">Blessed with the most discerning gustatory sense, Agumbe, our CTO, personally ensures that every dish that we serve meets his exacting tastes. Our chefs dread the tongue lashing that ensues if their dish does not meet his exacting standards. He lives by his motto, <em>You click only if you survive my lick.</em></p>
					<h3>Alberto Somayya <small>Executive Chef</small></h3>
					<p class="d-none d-sm-block">Award winning three-star Michelin chef with wide International experience having worked closely with whos-who in the culinary world, he specializes in creating mouthwatering Indo-Italian fusion experiences. He says, <em>Put together the cuisines from the two craziest cultures, and you get a winning hit! Amma Mia!</em></p>
				</div>
			</div>

		</div>

		<footer class="footer">
			<div class="container">
				<div class="row">             
					<div class="col-4 offset-1 col-sm-2">
						<h5>Links</h5>
						<ul class="list-unstyled">
							<li><a href="#">Home</a></li>
							<li><a href="#">About</a></li>
							<li><a href="#">Menu</a></li>
							<li><a href="#">Contact</a></li>
						</ul>
					</div>
					<div class="col-7 col-sm-5">
						<h5>Our Address</h5>
						<address>
							121, Clear Water Bay Road<br>
							Clear Water Bay, Kowloon<br>
							HONG KONG<br>
							Tel.: +852 1234 5678<br>
							Fax: +852 8765 4321<br>
							Email: <a href="mailto:confusion@food.net">confusion@food.net</a>
						</address>
					</div>
					<div class="col-12 col-sm-4 align-self-center">
						<div class="text-center">
							<a href="http://google.com/+">Google+</a>
							<a href="http://www.facebook.com/profile.php?id=">Facebook</a>
							<a href="http://www.linkedin.com/in/">LinkedIn</a>
							<a href="http://twitter.com/">Twitter</a>
							<a href="http://youtube.com/">YouTube</a>
							<a href="mailto:">Mail</a>
						</div>
					</div>
				</div>
				<div class="row justify-content-center">             
					<div class="col-auto">
						<p>Â© Copyright 2018 Ristorante Con Fusion</p>
					</div>
				</div>
			</div>
		</footer>


		<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
	</body>
	</html>

	<!-- tarea de php -->
	<?php // Do not put any HTML above this line

if ( isset($_POST['cancel'] ) ) {
    // Redirect the browser to game.php
    header("Location: index.php");
    return;
}

$salt = 'XyZzy12*_';
$stored_hash = '1a52e17fa899cf40fb04cfc42e6352f1';  // Pw is php123

$failure = false;  // If we have no POST data

// Check to see if we have some POST data, if we do process it
if ( isset($_POST['who']) && isset($_POST['pass']) ) {
	// check either the name or the password field is blank
    if ( strlen($_POST['who']) < 1 || strlen($_POST['pass']) < 1 ) {
        $failure = "Email and password are required";
    } else {
		// resistant to HTML Injection attempts
		$pass = htmlentities($_POST['pass']);
        $who = htmlentities($_POST['who']);
		// check the login name contains an at-sign (@) 
        if ((strpos($who, '@') === false)){        
            $failure = "Email must have an at-sign (@)";
        } else {
		   // check the password is non-blank and incorrect
           $check = hash('md5', $salt.$_POST['pass']);
           if ( $check == $stored_hash ) {
               // Redirect the browser to autos.php
			   error_log("Login success ".$_POST['who']);
               header("Location: autos.php?name=".urlencode($_POST['who']));
               return;
           } else {
			   error_log("Login fail ".$_POST['who']." $check");
               $failure = "Incorrect password";
           }
		}
    }
}

// Fall through into the View
?>
<!DOCTYPE html>
<html>
<head>
<?php require_once "bootstrap.php"; ?>
<title>Lee-Pin Shing's Login Page</title>
</head>
<body>
<div class="container">
<h1>Please Log In</h1>
<?php
// Note triple not equals and think how badly double
// not equals would work here...
if ( $failure !== false ) {
    // Look closely at the use of single and double quotes
    echo('<p style="color: red;">'.htmlentities($failure)."</p>\n");
}
?>
<form method="POST">
<label for="nam">User Email</label>
<input type="text" name="who" id="nam"><br/>
<label for="id_1723">Password</label>
<input type="text" name="pass" id="id_1723"><br/>
<input type="submit" value="Log In">
<input type="submit" name="cancel" value="Cancel">
</form>
<p>
For a password hint, view source and find a password hint
in the HTML comments.
<!-- Hint: The password is the four character sound a cat
makes (all lower case) followed by 123. -->
</p>
</div>
</body>

<!-- autos -->

<?php

// Demand a GET parameter
// check the $_GET variable to see if the user's name is set and if the user's name is not present
if (!isset($_GET['name']) || strlen($_GET['name']) < 1 ) {
    die('Name parameter missing');
}

if (strpos($_GET['name'], '@') === false ) {
    die('Name parameter is wrong');
}

// If the user requested logout go back to index.php
if (isset($_POST['logout']) ) {
    header('Location: index.php');
    return;
}

try {
	require_once "pdo.php";
}
catch(PDOException $e){
    echo "Please contact Customer Support.";
    die();
}

// resistant to HTML Injection attempts
$name = htmlentities($_GET['name']);
$status = false;  // If we have no POST data
$status_color = 'red';

// Check to see if we have some POST data, if we do process it
if (isset($_POST['mileage']) && isset($_POST['year']) && isset($_POST['make'])) {
	// If either mileage or year field is not nummeric
    if (!is_numeric($_POST['mileage']) || !is_numeric($_POST['year']) ) {
        $status = "Mileage and year must be numeric";
    }
	// if make field is empty
    else if (strlen($_POST['make']) < 1){
        $status = "Make is required";
    }
    else {
		// resistant to HTML Injection attempts
        $make = htmlentities($_POST['make']);
        $year = htmlentities($_POST['year']);
        $mileage = htmlentities($_POST['mileage']);
		// resistant to SQL Injection attempts
        $stmt = $pdo->prepare('
            INSERT INTO autos (make, year, mileage) 
            VALUES (:make, :year, :mileage)
        ');

        $stmt->execute(array(
            ':make' => $make, 
            ':year' => $year,
            ':mileage' => $mileage)
        );

        $status = 'Record inserted';
        $status_color = 'green';
    }
}

$autos = [];
$all_autos = $pdo->query("SELECT * FROM autos");

while ($row = $all_autos->fetch(PDO::FETCH_OBJ) ) {
    $autos[] = $row;
}

?>
<!DOCTYPE html>
<html>
<head>
<?php require_once "bootstrap.php"; ?>
<title>Lee-Pin Shing's Automobiles Database</title>
</head>
<body>
<div class="container">
<h1>Tracking Autos for <?php echo $name; ?></h1>
<?php
// Note triple not equals and think how badly double
// not equals would work here...
if ( $status !== false ) {
    // Look closely at the use of single and double quotes
    echo('<p style="color:'.$status_color.';">'.htmlentities($status)."</p>\n");
}
?>
<form method="POST">
<label for="make">Make:</label>
<input type="text" name="make" id="make" size="60"><br/>
<br/>
<label for="year">Year:</label>
<input type="text" name="year" id="year"><br/>
<br/>
<label for="mileage">Mileage:</label>
<input type="text" name="mileage" id="mileage"><br/>
<br/>
<input type="submit" value="Add">
<input type="submit" name="logout" value="Logout">
</form>

<h2>Automobiles</h2>
<?php if(!empty($autos)) : ?>
<ul>
<?php foreach($autos as $auto) : ?>
<li>
<?php echo $auto->year; ?> <?php echo $auto->make; ?> &#47; <?php echo $auto->mileage; ?> 
</li>
<?php endforeach; ?>
</ul>
<?php endif; ?>
</div>
</body>
</html>